@model CartListViewModel;
@{
    ViewData["Title"] = "DetailsCart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    #Shipping {
        height: 20px;
        outline: none;
        background: #ecfdff;
        border: 1px solid #ecfdff;
        width: 50%;
        padding: 0px 15px;
        margin-bottom: 20px;
    }
</style>
<header class="main_menu home_menu">
    <div id="account-info" class="container">
        <div class="row align-items-center">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index"> <img src="img/logo.png" alt="logo"> </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="menu_icon"><i class="fas fa-bars"></i></span>
                    </button>

                    <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_1"
                                   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Shop
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                                    <a class="dropdown-item" asp-area="" asp-controller="Categories" asp-action="Index"> shop category</a>
                                    <a class="dropdown-item" href="single-product.html">product details</a>

                                </div>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_3"
                                   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    pages
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                    <a class="dropdown-item" href="login.html"> login</a>
                                    <a class="dropdown-item" href="tracking.html">tracking</a>
                                    <a class="dropdown-item" href="checkout.html">product checkout</a>
                                    <a class="dropdown-item" href="cart.html">shopping cart</a>
                                    <a class="dropdown-item" href="confirmation.html">confirmation</a>
                                    <a class="dropdown-item" href="elements.html">elements</a>
                                </div>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_2"
                                   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    blog
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                    <a class="dropdown-item" href="blog.html"> blog</a>
                                    <a class="dropdown-item" href="single-blog.html">Single blog</a>
                                </div>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="contact.html">Contact</a>
                            </li>
                        </ul>
                    </div>
                    <div id="shop" class="hearer_icon d-flex">
                        <a id="search_1" href="javascript:void(0)"><i class="ti-search"></i></a>
                        <a href=""><i class="ti-heart"></i></a>
                        <partial name="_LoginPartial" />
                        <div class="dropdown cart">
                            <a class="dropdown-toggle" href="#" id="navbarDropdown3" role="button"
                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-cart-plus"></i>
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <div class="single_product">
                                    {{cart}}
                                </div>
                            </div>

                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <div class="search_input" id="search_input_box">
        <div class="container ">
            <form class="d-flex justify-content-between search-inner">
                <input type="text" class="form-control" id="search_input" placeholder="Search Here">
                <button type="submit" class="btn"></button>
                <span class="ti-close" id="close_search" title="Close Search"></span>
            </form>
        </div>
    </div>
</header>

<section class="breadcrumb breadcrumb_bg">
    <div  class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="breadcrumb_iner">
                    <div class="breadcrumb_iner_item">
                        <h2>Cart Products</h2>
                        <p>Home <span>-</span>Cart Products</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- breadcrumb start-->
<!--================Cart Area =================-->
<section class="cart_area padding_top">
    <div id="app" class="container">
        <div class="cart_inner">
         
            <form enctype="multipart/form-data" asp-action="Create"  asp-controller="Cart" novalidate="novalidate">

                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Product</th>
                                <th scope="col">Price</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="item in product" :key="item.id" :item="item">
                                <td>
                                    <div class="media">
                                        <div class="d-flex">
                                            <img :src="'/image/'+item.imageBallina" alt="" />
                                        </div>
                                        <div class="media-body">
                                            <p>{{item.name}}</p>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <h5>${{item.price_sell}}.00</h5>
                                </td>
                                <td>
                                    <div class="product_count">

                  <input v-model="quantitys" class="input-number" value="@Html.DisplayFor(model => model.CartListViewM.Quantity)" min="0">
                    

                                    </div>
                                </td>
                                <td>
                                    <h5>${{sum}}.00</h5>

                                </td>
                            </tr>

                            <tr class="bottom_button">
                                <td>
                                    <a class="btn_1" href="#">Update Cart</a>
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <div class="cupon_text float-right">
                                        <a class="btn_1" href="#">Close Coupon</a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td>
                                    <h5>Subtotal</h5>
                                </td>
                                <td>
                                    <h5>${{sum}}.00</h5>
                                    <input hidden asp-for="Price" v-model="sum" class="form-control" />

                                    <input hidden asp-for="Quantityc" v-model="quantity" class="form-control" />
                                    <input hidden asp-for="ProductIDc" v-model="productid" class="form-control" />
                                    <input hidden asp-for="Idc" v-model="listcs" class="form-control" />
                                </td>
                            </tr>
                            <tr class="shipping_area">
                                <td></td>
                                <td></td>
                               
                                <td>
                                    <div class="shipping_box">
                                        <h5>Shipping</h5>

                                        <label for="one">Flat Rate: $5.00</label>
                                        @* <input asp-for="Shipping" type="radio" id="one" style="height:20px ; width:50% ;" name="radio" value="5" v-model="picked">*@
                                        @Html.RadioButtonFor(model => model.Shipping, "5")
                                        <label for="free">Free Shipping</label>
                                        @Html.RadioButtonFor(model => model.Shipping, "0")
                                        @* <input asp-for="Shipping" type="radio" id="free" style="height:20px ; width:50% ;" name="radio" value="0" v-model="picked">*@

                                        <label for="local">Local Delivery: $2.00</label>
                                        @Html.RadioButtonFor(model => model.Shipping, "2")
                                        @*<input asp-for="Shipping" type="radio" id="local" style="height:20px ; width:50% ;" name="radio" value="2" v-model="picked">*@




                                        <select class="shipping_select">
                                            <option value="1">Kosove</option>


                                        </select>
                                        @* <input hidden asp-for="CartListcsID.Add[]" value="@Html.DisplayFor(model => model.CartListViewM)" class="form-control" />*@

                                        <select asp-for="City" class="shipping_select section_bg">
                                            <option value="Prishtine">Prishtine</option>
                                            <option value="Gjakove">Gjakove</option>
                                            <option value="Prizren">Prizren</option>
                                            <option value="Ferizaj">Ferizaj</option>
                                        </select>

                                        <input type="text" placeholder="Postcode/Zipcode" />

                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="checkout_btn_inner pb-5 float-right">

                        <button class="btn_1 checkout_btn_1" type="submit">Proceed to checkout</button>
                    </div>
                </div>
               </form>
        </div>
    </div>
</section>


<script src="~/lib/vue/vue.js"></script>
<script language="javascript" type="text/javascript">

    var app = new Vue({
        el: '#app',

        data: {

            productsId: @Html.DisplayFor(model => model.CartListViewM.ProductID),
            cartProducts: [],
            cart: [],
            price: 1,
            picked:2 ,
            product: [],
            productsList: [],
            quantitys:@Html.DisplayFor(model => model.CartListViewM.Quantity) ,
            cartListcsID:[] ,
        },

        mounted: function () {

            let products = '@Html.Raw(Json.Serialize(Model.ProductIndexViewM))';
            this.productsList = JSON.parse(products);

              let list = '@Html.Raw(Json.Serialize(Model.CartListViewM))';
            this.cartListcsID = JSON.parse(list);

            let productsList_array = this.productsList;

            if (this.productsId != '' && this.productsId) {
                productsList_array = productsList_array.filter((item) => {
                    return (item.id == this.productsId )
                })
            }


            this.product = productsList_array;
            this.price = this.product[0].price_sell ;



        },

        methods: {
            addToCart: function () {
                this.cart.push({
                    item: this.product,
                    quantity: this.quantitys
            });
            },

        },

      computed: {
              sum() {
              let total = 1;
              total = this.quantitys * this.price;
                  return total ;
          },
          listcs() {
              return  "@Html.DisplayFor(model => model.CartListViewM.Id)";
          },
          productid() {

              return this.productsId;
          },
          quantity() {

              return this.quantitys;
          },








      },
  });
</script>