@model ProductDetails;
@{
    ViewData["Title"] = "DetailsAndReviews";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .star-widget label {
        font-size: 15px;
        color: #444;
        padding: 3px;
        float: right;
        transition: all 0.2s ease;
    }

    .star-widget input {
        display: none;
    }

    input:not(:checked) ~ label:hover,
    input:not(:checked) ~ label:hover ~ label {
        color: #fd4;
    }

    input:checked ~ label {
        color: #fd4;
    }

    input#rate-5:checked ~ label {
        color: #fe7;
        text-shadow: 0 0 2px #952;
    }
</style>
 <header class="main_menu home_menu">
        <div id="account-info" class="container">
            <div class="row align-items-center">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index"> <img src="img/logo.png" alt="logo"> </a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                            <span class="menu_icon"><i class="fas fa-bars"></i></span>
                        </button>

                        <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_1"
                                       role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Shop
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                                        <a class="dropdown-item" asp-area="" asp-controller="Categories" asp-action="Index"> shop category</a>
                                        <a class="dropdown-item" href="single-product.html">product details</a>

                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_3"
                                       role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        pages
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                        <a class="dropdown-item" href="login.html"> login</a>
                                        <a class="dropdown-item" href="tracking.html">tracking</a>
                                        <a class="dropdown-item" href="checkout.html">product checkout</a>
                                        <a class="dropdown-item" href="cart.html">shopping cart</a>
                                        <a class="dropdown-item" href="confirmation.html">confirmation</a>
                                        <a class="dropdown-item" href="elements.html">elements</a>
                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_2"
                                       role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        blog
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                        <a class="dropdown-item" href="blog.html"> blog</a>
                                        <a class="dropdown-item" href="single-blog.html">Single blog</a>
                                    </div>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" href="contact.html">Contact</a>
                                </li>
                            </ul>
                        </div>
                        <div id="shop" class="hearer_icon d-flex">
                            <a id="search_1" href="javascript:void(0)"><i class="ti-search"></i></a>
                            <a href=""><i class="ti-heart"></i></a>
                            <partial name="_LoginPartial" />
                            <div class="dropdown cart">
                                <a class="dropdown-toggle" href="#" id="navbarDropdown3" role="button"
                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-cart-plus"></i>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <div class="single_product">
                                        {{cart}}
                                    </div>
                                </div>

                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
        <div class="search_input" id="search_input_box">
            <div class="container ">
                <form class="d-flex justify-content-between search-inner">
                    <input type="text" class="form-control" id="search_input" placeholder="Search Here">
                    <button type="submit" class="btn"></button>
                    <span class="ti-close" id="close_search" title="Close Search"></span>
                </form>
            </div>
        </div>
    </header>
<script type="module" src="https://unpkg.com/@@google/model-viewer/dist/model-viewer.js"></script>
<section class="breadcrumb breadcrumb_bg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="breadcrumb_iner">
                    <div class="breadcrumb_iner_item">
                        <h2>Product</h2>
                        <p>Home <span>-</span> Product Details</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- breadcrumb start-->
<!--================End Home Banner Area =================-->
<!--================Single Product Area =================-->
<div class="product_image_area section_padding">
    <div class="container">
        <div class="row s_product_inner justify-content-between">
            <div class="col-lg-7 col-xl-7">
                <div class="product_slider_img">
                    <div id="vertical">
                        @*<script type="module" src="/3d engine/examples/js/jquery/jquerysd.js"></script>@**@
                        <!--<model-viewer id="sphere" src="/3d engine/examples/models/gltf/chair.gltf" camera-controls ar ios-src=""></model-viewer>-->

                        <div id="container2" style="z-index:999;" width ="550" height ="350"></div>

                    </div>
                </div>
            </div>
            <div id="app" class="col-lg-5 col-xl-4">
                <div class="s_product_text">
                    <form class="row contact_form" enctype="multipart/form-data" asp-action="CreateCartList" novalidate="novalidate">
                        <div class=" row pb-4">
                            <div class="col-sm-12">
                                <h3 class="pr-4">  @Html.DisplayFor(model => model.ProductsDetailsViewModel.Name)</h3>

                                <h2> $ @Html.DisplayFor(model => model.ProductsDetailsViewModel.Price_sell)</h2>
                            </div>
                            <div>
                                <ul class="list">
                                    <li>
                                        <a class="active" href="#">

                                            <span>Category</span> : {{ categoriesname }}


                                        </a>
                                    </li>
                                    <li>
                                        <a href="#"> <span>Availibility</span> : In Stock</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    <input hidden asp-for="Pid" id="myProduct" value="" class="form-control" />

                    <div class="card_area d-flex justify-content-between align-items-center">
                        <div class="product_count">


                            <span v-if="quantitys > 0" v-on:click="quantitys -=1"> <i class="ti-minus"></i></span>

                            <span v-else="quantitys <=0" disabled> <i class="ti-minus"></i></span>


                            <input asp-for="Quantity" v-model="quantitys" class="input">


                            <span v-if="quantitys < @Html.DisplayFor(model => model.ProductsDetailsViewModel.Quantity)" v-on:click="quantitys +=1"> <i class="ti-plus"></i></span>

                            <span v-else="quantitys > @Html.DisplayFor(model => model.ProductsDetailsViewModel.Quantity)" disabled> <i class="ti-plus"></i></span>

                        </div>
                        

                        <button type="submit" onclick="myproductId();"  class="btn_3">add to cart  </button>

                        <a href="#" class="like_us"> <i class="ti-heart"></i> </a>
                    </div>
                     </form>
                </div>
            </div>
        </div>
    </div>
</div>

<section class="product_description_area">
    <div id="ell" class="container">
        <ul class="nav nav-tabs" id="myTab" role="tablist">

            <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                   aria-selected="false">Specification</a>
            </li>

            <li class="nav-item">
                <a class="nav-link active" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review"
                   aria-selected="false">Reviews</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">


            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>
                                    <h5>Quantity</h5>
                                </td>
                                <td>
                                    <h5> @Html.DisplayFor(model => model.ProductsDetailsViewModel.Quantity)</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>InStock</h5>
                                </td>
                                <td>
                                    <h5> @Html.DisplayFor(model => model.ProductsDetailsViewModel.Active)</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Measure</h5>
                                </td>
                                <td>
                                    <h5>@Html.DisplayFor(model => model.ProductsDetailsViewModel.Measure)</h5>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <h5>Quality checking</h5>
                                </td>
                                <td>
                                    <h5>yes</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Freshness Duration</h5>
                                </td>
                                <td>
                                    <h5>03days</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>When packeting</h5>
                                </td>
                                <td>
                                    <h5>Without touch of hand</h5>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h5>Each Box contains</h5>
                                </td>
                                <td>
                                    <h5>60pcs</h5>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade show active" id="review" role="tabpanel" aria-labelledby="review-tab">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="row total_rate">
                            <div class="col-6">
                                <div class="box_total">
                                    <h5>Overall</h5>
                                    <h4>{{Total}}</h4>

                                </div>
                            </div>
                            <div class="col-6">

                            </div>
                        </div>

                        <div class="review_list">
                            @foreach (var item in Model.ReviewIndexViewModel)
                            {
                                <div class="review_item">
                                    <div class="media">

                                        <div class="media-body">
                                            <h4>  @Html.DisplayFor(modelItem => item.Name)</h4>
                                            @for (int i = 0; i < item.Rating; i++)
                                            {
                                                <i class="fa fa-star"></i>
                                            }
                                        </div>
                                    </div>
                                    <p>
                                        @Html.DisplayFor(modelItem => item.Reviews)
                                    </p>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="review_box">
                            <h4>Add a Review</h4>

                            <form class="row contact_form" enctype="multipart/form-data" asp-action="CreateReview" novalidate="novalidate">
                                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                                <p>Your Rating:  </p>
                                <div class="star-widget">
                                    <input type="radio" name="rate" value="5" id="rate-5">
                                    <label for="rate-5" class="fas fa-star"></label>
                                    <input type="radio" name="rate" value="4" id="rate-4">
                                    <label for="rate-4" class="fas fa-star"></label>
                                    <input type="radio" name="rate" value="3" id="rate-3">
                                    <label for="rate-3" class="fas fa-star"></label>
                                    <input type="radio" name="rate" value="2" id="rate-2">
                                    <label for="rate-2" class="fas fa-star"></label>
                                    <input type="radio" name="rate" value="1" id="rate-1">
                                    <label for="rate-1" class="fas fa-star"></label>
                                </div>


                                <p>Outstanding</p>
                                <div class="col-md-12">
                                    <div class="form-group">

                                        <input type="text" asp-for="Name" class="form-control" name="name" placeholder="Your Full name" />
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="email" asp-for="Email" class="form-control" name="email" placeholder="Email Address" />
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="form-group">
                                        <input class="form-control" asp-for="Reviews" placeholder="Review">
                                    </div>
                                </div>

                                <input hidden asp-for="Rating" id="myStars" value="" class="form-control" />

                                <input hidden asp-for="ProductID" id="myProductId" value="" class="form-control" />

                                <div class="col-md-12 text-right">

                                    <input type="submit" onclick="myFunction(); myRating();" value="Submit Now" class="btn_3" />
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
<!--================End Product Description Area =================-->
<!-- product_list part start-->



<script src="~/lib/vue/vue.js"></script>

<script language="javascript" type="text/javascript">

       function myproductId() {
            document.getElementById("myProduct").value = @Html.DisplayFor(model => model.ProductsDetailsViewModel.Id) ;
        }

        function myFunction() {
            document.getElementById("myProductId").value = @Html.DisplayFor(model => model.ProductsDetailsViewModel.Id) ;
        }

        function myRating() {
            var ele = document.getElementsByName('rate');

            for (i = 0; i < ele.length; i++) {
                if (ele[i].checked) {
                    if (ele[i].value == '1') {
                        document.getElementById("myStars").value = 1;
                    }
                    else if (ele[i].value == '2') {
                        document.getElementById("myStars").value = 2;
                    }
                    else if (ele[i].value == '3') {
                        document.getElementById("myStars").value = 3;
                    }
                    else if (ele[i].value == '4') {
                        document.getElementById("myStars").value = 4;
                    }
                    else {
                        document.getElementById("myStars").value = 5;
                    }
                }
            }

    }


    var app = new Vue({
        el: '#app',

        data: {
            categories: '',
            categoriesname: '',
            productsId: '',
            cartProducts: [],
            cart: [],
            product: [],
            quantitys: 1,
        },

        mounted: function () {

            this.categories = @Html.DisplayFor(model => model.ProductsDetailsViewModel.CategoryID);

          let products = '@Html.Raw(Json.Serialize(Model.ProductsDetailsViewModel))';
            this.product = JSON.parse(products);

            if (this.categories === 4) {

                this.categoriesname = 'Sofa'
            }
            else if (this.categories === 5) {
                this.categoriesname = 'Table'
            }
            else if (this.categories === 6) {
                this.categoriesname = 'Chair'
            }
            else {
                this.categoriesname = 'NoCategory'
            }
        },

        methods: {
            addToCart: function () {
                this.cart.push({
                    item: this.product,
                    quantity: this.quantitys
                });

            },
            
        }
    });

         var ell = new Vue({
            el: '#ell',

            data: {
                allrating: [],
                star: ''

            },
            mounted: function () {
                let products = '@Html.Raw(Json.Serialize(Model.ReviewIndexViewModel))';
                this.allrating = JSON.parse(products);
             },

             computed: {
                 Total() {
                     let total = 0.0;
                     for (let i = 0; i < this.allrating.length; i++) {
                         total += this.allrating[i].rating;
                     }
                     return total /this.allrating.length;
                 }
        },
        });


</script>


<script type="module" src="/3d engine/examples/js/jquery/jquerysd.js"></script>

    <script>
        const modelViewerParameters = document.querySelector("model-viewer#sphere");

    modelViewerParameters.addEventListener("load", (ev) => {

            let object3 = modelViewerParameters.model.materials[0];

        //  const bodyColor = new THREE.Color();



        // Defaults to gold
        //object3.pbrMetallicRoughness.setBaseColorFactor([0.7294, 0.5333, 0.0392]);

        //object3.getObjectByName( 'Tube029_new001' ).material.color= [0.7294, 0.5333, 0.0392];

    })
</script>