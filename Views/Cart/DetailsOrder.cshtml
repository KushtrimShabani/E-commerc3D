

@model OrdersView ;

@{ ViewData["Title"] = "DetailsOrder";
                Layout = "~/Views/Shared/_Layout.cshtml"; }

<header class="main_menu home_menu">
    <div id="account-info" class="container">
        <div class="row align-items-center">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index"> <img src="img/logo.png" alt="logo"> </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="menu_icon"><i class="fas fa-bars"></i></span>
                    </button>

                    <div class="collapse navbar-collapse main-menu-item" id="navbarSupportedContent">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_1"
                                   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Shop
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                                    <a class="dropdown-item" asp-area="" asp-controller="Categories" asp-action="Index"> shop category</a>
                                    <a class="dropdown-item" href="single-product.html">product details</a>

                                </div>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_3"
                                   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    pages
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                    <a class="dropdown-item" href="login.html"> login</a>
                                    <a class="dropdown-item" href="tracking.html">tracking</a>
                                    <a class="dropdown-item" href="checkout.html">product checkout</a>
                                    <a class="dropdown-item" href="cart.html">shopping cart</a>
                                    <a class="dropdown-item" href="confirmation.html">confirmation</a>
                                    <a class="dropdown-item" href="elements.html">elements</a>
                                </div>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="blog.html" id="navbarDropdown_2"
                                   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    blog
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                    <a class="dropdown-item" href="blog.html"> blog</a>
                                    <a class="dropdown-item" href="single-blog.html">Single blog</a>
                                </div>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="contact.html">Contact</a>
                            </li>
                        </ul>
                    </div>
                    <div id="shop" class="hearer_icon d-flex">
                        <a id="search_1" href="javascript:void(0)"><i class="ti-search"></i></a>
                        <a href=""><i class="ti-heart"></i></a>
                        <partial name="_LoginPartial" />
                        <div class="dropdown cart">
                            <a class="dropdown-toggle" href="#" id="navbarDropdown3" role="button"
                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-cart-plus"></i>
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <div class="single_product">
                                    {{cart}}
                                </div>
                            </div>

                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <div class="search_input" id="search_input_box">
        <div class="container ">
            <form class="d-flex justify-content-between search-inner">
                <input type="text" class="form-control" id="search_input" placeholder="Search Here">
                <button type="submit" class="btn"></button>
                <span class="ti-close" id="close_search" title="Close Search"></span>
            </form>
        </div>
    </div>
</header>










<section class="breadcrumb breadcrumb_bg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="breadcrumb_iner">
                    <div class="breadcrumb_iner_item">
                        <h2>Producta Checkout</h2>
                        <p>Home <span>-</span> Orders</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- breadcrumb start-->
<!--================Checkout Area =================-->
<section class="checkout_area padding_top">
    <div id="app" class="container">
        <div class="returning_customer">
            <div class="check_title">
                <h2>
                    Returning Customer?
                    <a href="#">Click here to login</a>
                </h2>
            </div>
            <p>
                If you have shopped with us before, please enter your details in the
                boxes below. If you are a new customer, please proceed to the
                Billing & Shipping section.
            </p>
            <form class="row contact_form" action="#" method="post" novalidate="novalidate">
                <div class="col-md-6 form-group p_star">
                    <input type="text" class="form-control" id="name" name="name" value=" " />
                    <span class="placeholder" data-placeholder="Username or Email"></span>
                </div>
                <div class="col-md-6 form-group p_star">
                    <input type="password" class="form-control" id="password" name="password" value="" />
                    <span class="placeholder" data-placeholder="Password"></span>
                </div>
                <div class="col-md-12 form-group">
                    <button type="submit" value="submit" class="btn_3">
                        log in
                    </button>
                    <div class="creat_account">
                        <input type="checkbox" id="f-option" name="selector" />
                        <label for="f-option">Remember me</label>
                    </div>
                    <a class="lost_pass" href="#">Lost your password?</a>
                </div>
            </form>
        </div>
        <div class="cupon_area">
            <div class="check_title">
                <h2>
                    Have a coupon?
                    <a href="#">Click here to enter your code</a>
                </h2>
            </div>
            <input type="text" placeholder="Enter coupon code" />
            <a class="tp_btn" href="#">Apply Coupon</a>
        </div>
        <div class="billing_details">
            <div class="row">
                <div class="col-lg-8">
                    <h3>Billing Details</h3>
                    <form class="row contact_form" enctype="multipart/form-data" asp-action="CreateOrder"  novalidate="novalidate">
                        <div class="col-md-6 form-group p_star">
                            <input asp-for="ContactName" type="text" class="form-control" placeholder="First name" />

                        </div>
                        <div class="col-md-6 form-group p_star">
                            <input  type="text" class="form-control" placeholder="Last name"  />

                        </div>

                        <div class="col-md-6 form-group p_star">
                            <input asp-for="Mobile" type="text" class="form-control"  placeholder="Phone number"  />

                        </div>
                        <div class="col-md-6 form-group p_star">
                            <input asp-for="Email" type="text" class="form-control" placeholder="Email Address" />

                        </div>

                        <div class="col-md-12 form-group p_star">
                            <select asp-for="City" class="country_select">
                                <option value="Prishtine">Prishtine</option>
                                <option value="Gjakove">Gjakove</option>
                                <option value="Prizren">Prizren</option>
                                <option value="Ferizaj">Ferizaj</option>
                            </select>
                        </div>

                        <div class="col-md-12 form-group p_star">
                            <input asp-for="AddressShipping" value="" type="text" class="form-control" placeholder="Address line" />

                        </div>
                       

                        <div class="col-md-12 form-group p_star">
                            <input asp-for="Country" type="text" class="form-control" placeholder="Town/City" />

                        </div>

                        <div class="col-md-12 form-group">
                            <input asp-for="Address" type="text" class="form-control"  placeholder="Postcode/ZIP" />
                        </div>
                        <input hidden asp-for="CartId" id="myProductId" class="form-control" />

                        <div class="col-md-12 form-group">
                            <div class="creat_account">
                                <h3>Shipping Details</h3>
                                <input v-model="checked" type="checkbox" id="f-option3" name="selector" />
                                <label for="f-option3">Ship to a difficult address?</label>
                            </div>
                            <textarea v-if="checked" asp-for="OrderNotes" class="form-control" rows="1"
                                      placeholder="Order Notes"></textarea>
                            <textarea v-else disabled asp-for="OrderNotes" class="form-control"  rows="1"
                                      placeholder="Order Notes"></textarea>
                        </div>
                        <input type="submit" onclick="myFunction();" value="Proceed  Now" class="btn_3 mb-5" />
                    </form>
                </div>
                <div class="col-lg-4">
                    <div class="order_box">
                        <h2>Your Order</h2>
                        <ul class="list">
                            <li>
                                <a href="#">
                                    Product
                                    <span>Total</span>
                                </a>
                            </li>
                            <li v-for="product in productcart" :key="product.item.id" :product="product">
                                <a href="#">
                                    {{product.item.name}}
                                    <span class="middle">x {{product.quantity}}</span>
                                    <span class="last">${{product.item.price_sell}}.00</span>
                                </a>
                            </li>


                        </ul>
                        <ul class="list list_2">
                            <li>
                                <a href="#">
                                    Subtotal
                                    <span>${{sum}}.00</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Shipping
                                    <span>Flat rate: ${{shipping}}.00</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Total
                                    <span>${{total}}.00</span>
                                </a>
                            </li>
                        </ul>
                        <div class="payment_item">
                            <div class="radion_btn">
                                <input type="radio" id="f-option5" name="selector" />
                                <label for="f-option5">Check payments</label>
                                <div class="check"></div>
                            </div>
                            <p>
                                Please send a check to Store Name, Store Street, Store Town,
                                Store State / County, Store Postcode.
                            </p>
                        </div>
                        <div class="payment_item active">
                            <div class="radion_btn">
                                <input type="radio" id="f-option6" name="selector" />
                                <label for="f-option6">Paypal </label>
                                <img src="img/product/single-product/card.jpg" alt="" />
                                <div class="check"></div>
                            </div>
                            <p>
                                Please send a check to Store Name, Store Street, Store Town,
                                Store State / County, Store Postcode.
                            </p>
                        </div>
                        <div class="creat_account">
                            <input type="checkbox" id="f-option4" name="selector" />
                            <label for="f-option4">I’ve read and accept the </label>
                            <a href="#">terms & conditions*</a>
                        </div>
                      
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<script src="~/lib/vue/vue.js"></script>
<script language="javascript" type="text/javascript">
     function myFunction() {
            document.getElementById("myProductId").value = '@Html.DisplayFor(model => model.CartViewM.Id)' ;
     }

    var app = new Vue({
        el: '#app',
        data: {
            checked: true,
            productsList: [],
            productcart: [],
            product: [],
            shipping : @Html.DisplayFor(model => model.CartViewM.Shipping),
        },
        mounted: function () {
            let cart = '@Html.Raw(Json.Serialize(Model.CartViewM.CartListcsID))';
            this.productsList = JSON.parse(cart);

            let products = '@Html.Raw(Json.Serialize(Model.ProductIndex))';
            this.product = JSON.parse(products);

            for (let i = 0; i < this.product.length; i++) {
                for (let j = 0; j < this.productsList.length; j++) {
                    if (this.product[i].id === this.productsList[j].productID) {
                        this.productcart.push({
                            item: this.product[i],
                            quantity: this.productsList[j].quantity
                        });

                    }
                }
            }
        },
        computed: {
            sum() {
                let total = 0;
                for (let i = 0; i < this.productcart.length; i++) {
                    total += this.productcart[i].item.price_sell * this.productcart[i].quantity;
                }
                return total;
            },
            total() {
                return this.sum + this.shipping;
            },
            
        },
    })
</script>